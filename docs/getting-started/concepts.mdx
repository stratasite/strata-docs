# Core Concepts

Understanding the fundamental concepts of Strata's semantic layer.

## What is a Semantic Layer?

A semantic layer is an abstraction that sits between your raw database tables and business users. It translates business-friendly field names (like "Total Revenue") into optimized SQL queries against your physical database.

**Benefits:**
- **Self-service analytics**: Business users can explore data without writing SQL
- **Consistency**: Single source of truth for metrics and definitions
- **Performance**: Optimized query generation with cost-based routing
- **Security**: Centralized access control and data governance

## Key Components

### Tables

Tables (`tbl.*.yml`) represent physical database tables with semantic metadata. They define:
- **Dimensions**: Categorical fields (e.g., Customer Name, Product Category)
- **Measures**: Aggregatable metrics (e.g., Total Sales, Average Order Value)
- **Cost**: Query optimization hint (lower cost = preferred)
- **Partitions**: Data availability constraints

**Example:**
```yaml
name: Store Sales
physical_name: store_sales
datasource: tpcds
cost: 100

fields:
  - type: dimension
    name: Store Name
    data_type: string
    expression:
      sql: s_store_name

  - type: measure
    name: Total Revenue
    data_type: decimal
    expression:
      sql: sum(ss_sales_price)
```

### Relationships

Relations (`rel.*.yml`) define how tables join together. They specify:
- **Left and right tables**: Which tables to join
- **Join condition**: SQL expression for the join
- **Cardinality**: Relationship type (one-to-one, one-to-many, many-to-one)

**Example:**
```yaml
datasource: tpcds

store_sales_store:
  left: Store Sales
  right: Store
  sql: left.ss_store_sk = right.s_store_sk
  cardinality: many_to_one
```

### Datasources

Datasources connect Strata to your databases. They support:
- **Multiple adapters**: PostgreSQL, Snowflake, MySQL, SQL Server, Athena, Trino, DuckDB, Druid
- **Tier configuration**: Hot (fast), Warm (moderate), Cold (archival)
- **Connection pooling**: Efficient query execution

## How It Works

### 1. Model Definition

Data engineers define semantic models using YAML files:
- Table models describe fields and metadata
- Relationship models define joins
- Migrations track changes over time

### 2. Deployment

Models are deployed to a Strata server:
- YAML files are validated
- Semantic model is built
- Universe paths are generated (all possible query paths)

### 3. Query Planning

When a user creates a query:
- **Universe Resolution**: Planner finds optimal data paths
- **DAG Construction**: Builds query execution plan
- **SQL Generation**: Converts semantic query to optimized SQL
- **Execution**: Runs query against datasource

### 4. Result Delivery

Query results are:
- Cached for performance
- Formatted according to field definitions
- Returned to the user interface

## Key Terminology

**Dimension**: A categorical field used for grouping and filtering (e.g., "Product Category", "Customer Region")

**Measure**: An aggregatable metric (e.g., "Total Sales", "Order Count")

**Universe**: A data access path through the semantic model that can answer a query

**Cardinality**: The relationship type between tables (one-to-one, one-to-many, many-to-one)

**Cost**: A numeric value that influences table selection when multiple tables can answer the same question

**Snapshot Measure**: A measure that captures a value at a specific point in time (beginning or ending of period)

**Decorator**: A transformation applied to projections (e.g., date truncation, window functions, temporal comparisons)

**Partition**: A constraint on data availability (e.g., "table only contains last 24 months")

## Project Structure

A typical Strata project:

```
my-project/
├── project.yml              # Project metadata
├── datasources.yml          # Datasource configurations
├── .strata                  # Local secrets (gitignored)
├── models/                  # Semantic model files
│   ├── sales/
│   │   ├── tbl.orders.yml
│   │   ├── tbl.customers.yml
│   │   └── rel.sales.yml
│   └── inventory/
│       └── tbl.products.yml
├── migrations/              # Schema migrations
│   └── 20260101_rename_field.yml
└── tests/                   # Query validation tests
    └── revenue_positive.yml
```

## Workflow

1. **Initialize**: Create project with `strata init`
2. **Configure**: Add datasources with `strata datasource add`
3. **Model**: Create tables and relationships
4. **Test**: Validate with `strata audit` and test files
5. **Deploy**: Upload to server with `strata deploy`

## Next Steps

- Learn how to [create tables](/docs/cli/creating-tables)
- Understand [field types and expressions](/docs/semantic-model/fields-and-types)
- Explore [relationships](/docs/cli/relationships)
- Read about [advanced features](/docs/advanced)
